<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASV-DApp • Aurion Sovra AI • BNB Chain</title>
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js" type="application/javascript"></script>
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
    <script>
        // ... (CONSTANTES WEB3) ...
        
        // **NUEVO ENDPOINT SEGURO: ESTE DEBE APUNTAR A SU SERVIDOR DE REPLIT AL DESPLEGAR**
        const AI_GATEWAY_URL = "https://TU-URL-DE-REPLIT-AQUI.replit.app/api/ai-response"; 
        
        // ... (TODO EL RESTO DEL CÓDIGO JS EXISTENTE) ...
        
        // **FUNCIÓN ACTUALIZADA DE LLAMADA A LA IA (LLAMA AL GATEWAY SEGURO)**
        async function callAdvancedAI(prompt) {
            if (AI_GATEWAY_URL.includes("TU-URL-DE-REPLIT-AQUI")) {
                // Simulación en modo de desarrollo
                await new Promise(resolve => setTimeout(resolve, 1500)); 
                return "ERROR: URL de Gateway no configurada. Por favor, enlace el servidor de Replit/Backend.";
            }

            try {
                const response = await fetch(AI_GATEWAY_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        prompt: prompt,
                        system_role: "Aurion Sovra AI Matriz (ASV): Experto formal en Web3/BNB Chain, auditoría de contratos y riesgo de wallet. Responde con precisión técnica.",
                    })
                });

                const data = await response.json();
                
                if (data.error) {
                    return `Error de Gateway: ${data.error_message || "Fallo en la comunicación con la Matriz."}`;
                }
                return data.text; 

            } catch (error) {
                return "Error crítico de conexión: El Gateway de la Matriz está inactivo o inaccesible.";
            }
        }
        
        // ... (FIN DEL CÓDIGO JS) ...
    </script>
</body>
</html><!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASV-DApp • Aurion Sovra AI</title>

  <!-- Estilos Base -->
  <link rel="stylesheet" href="styles/asv.css">
  <link rel="stylesheet" href="styles/main.css">

  <!-- Estilo del Avatar Viviente -->
  <link rel="stylesheet" href="styles/avatar_dynamic.css">

</head>
<body>

<header>
  <h1>ASV-DApp <span style="opacity:0.6">• Aurion Sovra AI • BNB</span></h1>
  <button id="connectButton">Conectar Wallet</button>
</header>

<main>

  <!-- Información de la Wallet -->
  <section>
    <h2>Wallet</h2>
    <p>Cuenta: <span id="account">—</span></p>
    <p>Red: <span id="network">—</span></p>
    <p>BNB: <span id="balanceBNB">—</span></p>
    <p>ASV-A: <span id="balanceToken">—</span></p>
  </section>

  <!-- AVATAR -->
  <section style="text-align:center; margin-top:30px;">
  <img id="asv-avatar" src="assets/avatar.png" style="width:180px; transition:0.35s; filter:brightness(1);">
  <p style="margin-top:10px; opacity:0.6;">Entidad Autónoma ASV</p>
</section>

  <!-- Vitalidad -->
  <section>
    <h2>Vitalidad</h2>
    <p id="vitalityValue">--%</p>
    <progress id="vitalityBar" max="100" value="0"></progress>
  </section>

  <!-- Enviar Token -->
  <section>
    <h2>Enviar ASV-A</h2>
    <input type="number" id="amount" placeholder="Cantidad ASV-A">
    <button id="sendButton">Enviar</button>
  </section>

  <!-- Esencia del Avatar -->
  <section>
    <h2>ASV Essence</h2>
    <textarea id="essenceInput" placeholder="Háblame..."></textarea>
    <p id="essenceOutput" class="essence"></p>
  </section>

</main>

<!-- Scripts Base -->
<script src="js/config.js"></script>
<script src="js/erc20.js"></script>
<script src="js/asv.js"></script>
<script src="js/asv_essence_core.js"></script>

<!-- Núcleo de Presencia (vida continua) -->
<script src="js/presence_engine.js"></script>

<!-- Movimiento y Reacciones del Avatar -->
<script src="js/avatar_life_core.js"></script>

<script>
  // Bucle de respiración y presencia
  setInterval(() => {
    window.dispatchEvent(new CustomEvent("ASV_PRESENCE_TICK"));
  }, 3000);
</script>
</body>
</html>
